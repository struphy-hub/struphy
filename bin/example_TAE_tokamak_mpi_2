#!/bin/bash -e

PYTHON=python3

# Struphy path
cd ~
STRUPHY=$($PYTHON -c "import struphy as _; print(_.__path__[0])")

# run MHD eigenvalue solver
$PYTHON $STRUPHY/eigenvalue_solvers/mhd_axisymmetric_main.py -1 /io/inp/examples/params_TAE_tokamak.yml /io/out/sim_10 spec

# run LinarMHD model
struphy run LinearMHD -i ../out/sim_10/parameters.yml -o sim_10 --mpi 2

# diagnostics and plots
path_e=$STRUPHY/examples
$PYTHON ${path_e}/example_TAE_tokamak.py $STRUPHY/io/out/sim_10