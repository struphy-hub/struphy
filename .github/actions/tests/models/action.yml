name: "Run model tests"

runs:
  using: composite
  steps:
    - name: Install dependencies
      shell: bash
      run: |
        struphy compile --status
        struphy compile --status
        struphy test models --fast
        struphy test models --fast --mpi 2
        struphy test models --fast --verification --mpi 1
        struphy test models --fast --verification --mpi 4
        struphy test models --fast --verification --mpi 4 --nclones 2
        struphy test DriftKineticElectrostaticAdiabatic --mpi 2 --nclones 2