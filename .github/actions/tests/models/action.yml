name: "Run model tests"

runs:
  using: composite
  steps:
    - name: Model tests
      shell: bash
      run: |
        struphy test LinearMHD
        struphy test toy
        struphy test models 
        struphy test verification 
    - name: Model tests with  MPI
      shell: bash
      run: |
        struphy test models 
        struphy test models --mpi 2
        struphy test verification --mpi 1
        struphy test verification --mpi 4
        struphy test verification --mpi 4 --nclones 2
        struphy test VlasovAmpereOneSpecies --mpi 2 --nclones 2
