name: "Run unit tests"

runs:
  using: composite
  steps:

    - name: Uninstall MPI
      shell: bash
      run: |
        pip show mpi4py
        pip uninstall -y mpi4py
        pip list

    - name: Run unit tests without MPI
      shell: bash
      env:
        TESTMON_DATAFILE: ${{ github.workspace }}/.testmondata-${{ matrix.test-type }}
      run: |
        struphy test unit
