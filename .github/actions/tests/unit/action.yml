name: "Run unit tests"

runs:
  using: composite
  steps:
    - name: Run unit tests
      shell: bash
      run: |
        struphy compile --status
        struphy --refresh-models
        struphy test unit

    - name: Run unit tests with MPI
      shell: bash
      run: |
        struphy compile --status
        struphy --refresh-models
        struphy test unit --mpi 2
